/*********************************************
   The MIT License (MIT)
   Copyright (c) 2013 - 2014 Sergii Danilov
   MoaJs - v0.1.3 - 2014-03-23
*********************************************/
!function(){Object.create||(Object.create=function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return e.prototype=t,new e}}());var e,t={},n={},r=function(e,t){var n;if(t){for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.toString=t.toString,e.valueOf=t.valueOf,e.toLocaleString=t.toLocaleString}return e},i=function(e,t){var n="Wrong parameters in "+e;throw t&&(n="Wrong parameter "+t+" in "+e),new Error(n,"Moa")},o=function(t,n,r){var i="Type ";if(t===e)throw r===!0&&(i="Mixin type "),new Error(i+n+" not found","Moa")},c=function(e,t){var r,i,c;for(r in t)i=t[r],c=n[i],o(c,i,!0),c.call(e),e[r]=new c;return e},a=function(t,n,i){var o,a,u=i.$single,f=i.$static,s=i.$mixin,l=i.$ctor,$=i.$di,d={};return l!==e?delete i.$ctor:l=function(){},delete i.$single,delete i.$static,delete i.$mixin,delete i.$extend,f!==e&&(a=f.$mixin,a!==e&&(delete f.$mixin,c(l,a)),r(l,f)),s!==e&&(i=r(c({},s),i)),n!==e&&(o=n.$type,i=r(Object.create(n.$ctor.prototype),i)),i.getType=function(){return t},r(d,i),l.prototype=i,l.prototype.constructor=l,u!==e&&u===!0&&!function(){var e=new l;l=function(){return e},l.getInstance=function(){return e}}(),d.$ctor=l,{$type:t,$basetype:o,$mixin:s,$di:$,$ctor:l,$base:d}},u=function(e,n){var r,i,o;n=n||{},n.$current||(n.$current=e);for(r in n){if("$ctor"===r)i=u(e,n[r]),delete i.$current;else switch(i=n[r],typeof i){case"string":"$current"===r?i={type:i,instance:"item",lifestyle:"transient"}:(o=t[i],o&&(i=o.$di.$current));break;case"object":"$current"===r&&(i.type=e),i.type&&("ctor"===i.instance?delete i.lifestyle:(i.instance||(i.instance="item"),i.lifestyle||(i.lifestyle="transient")))}n[r]=i}return n},f={clear:function(){var e=function(e){var t;for(t in e)delete e[t]};e(t),e(n)},define:function(n,r){var c,f,s,l=arguments.length;switch(l){case 1:c=t[n],o(c,n);break;case 2:switch(typeof r){case"function":f=r().$extend,f!==e?(s=t[f],o(s,f),c=a(n,s,r(s.$base))):c=a(n,e,r(e));break;case"object":if(null===r)return delete t[n],e;f=r.$extend,f!==e&&(s=t[f],o(s,f)),c=a(n,s,r);break;default:i("define","definition")}t[n]=c,t[n].$di=u(n,c.$di);break;default:i("define")}return c.$ctor},resolve:function(e,n){var c,a=t[e],u=arguments.length,f=function(e,t,n){var i;return t?(t=r(t,n),i=new e.$ctor(t)):i=new e.$ctor(n),i},s=function(t,n,o,a){var u,l,$,d,p,y=t.$current;if(y)u=o[y.type],d=t.$ctor,p=t;else{if(y=t,u=o[y.type],!u)return t;d=u.$di.$ctor,p=u.$di}switch(y.instance){case"item":switch(d&&(l=n(d,s,o)),$=n(p,s,o),y.lifestyle){case"transient":c=f(u,a,l);break;case"singleton":y.item||(y.item=f(u,a,l)),c=y.item;break;default:i("resolve",e+"::$di::$current::lifestyle")}break;case"ctor":c=u.$ctor;break;default:i("resolve",e+"::$di::$current::instance")}return $&&(c=r(c,$)),c},l=function(e,t,n){var r,i,o={};for(r in e)"$current"!==r&&"$ctor"!==r&&(i=e[r],o[r]="object"==typeof i?t(i,l,n):i);return o};return 1!==u&&2!==u&&i("resolve"),o(a,e),c=s(a.$di,l,t,n)},mixin:function(e,t){null!==t?("function"!=typeof t&&i("mixin","definition"),n[e]=t):delete n[e]},getRegistry:function(){var e=function(e){var t,n=[];for(t in e)n.push(t);return n};return{type:e(t),mixin:e(n)}},getTypeInfo:function(e){var n,i=t[e];return o(i,e),n=r({},i),delete n.$ctor,delete n.$base,delete n.$di,n.$di=JSON.parse(JSON.stringify(i.$di)),n}};"undefined"!=typeof define?define("Moa",[],function(){return f}):"undefined"!=typeof window?window.Moa=f:module.exports=f}();
//# sourceMappingURL=moa.min.js.map