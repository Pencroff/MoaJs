!function(){Object.create||(Object.create=function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return e.prototype=t,new e}}());var e,t="function",n="object",r="undefined",i="string",o={},c={},a=64,u=function(e,t){var n;if(t){for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.toString=t.toString,e.valueOf=t.valueOf,e.toLocaleString=t.toLocaleString}return e},f=function(e,t){var n="Wrong parameters in "+e;throw t&&(n="Wrong parameter "+t+" in "+e),new Error(n,"Moa")},s=function(t,n,r){var i="Type ";if(t===e)throw r===!0&&(i="Mixin type "),new Error(i+n+" not found","Moa")},l=function(e,t){var n,r,i;for(n in t)r=t[n],i=c[r],s(i,r,!0),i.call(e),e[n]=new i;return e},$=function(t,n,r){var i,o,c=r.$single,a=r.$static,f=r.$mixin,s=r.$ctor,$=r.$di,d={};return s!==e?delete r.$ctor:s=function(){},delete r.$single,delete r.$static,delete r.$mixin,delete r.$extend,a!==e&&(o=a.$mixin,o!==e&&(delete a.$mixin,l(s,o)),u(s,a)),f!==e&&(r=u(l({},f),r)),n!==e&&(i=n.$type,r=u(Object.create(n.$ctor.prototype),r)),r.getType=function(){return t},u(d,r),s.prototype=r,s.prototype.constructor=s,c!==e&&c===!0&&!function(){var e=new s;s=function(){return e},s.getInstance=function(){return e}}(),d.$ctor=s,{$type:t,$basetype:i,$mixin:f,$di:$,$ctor:s,$base:d}},d=function(e,t){var r,c,a;t=t||{},t.$current||(t.$current=e);for(r in t){if("$ctor"===r)c=d(e,t[r]),delete c.$current;else switch(c=t[r],typeof c){case i:"$current"===r?c={type:c,instance:"item",lifestyle:"transient"}:(a=o[c],a&&(c=a.$di.$current));break;case n:"$current"===r&&(c.type=e),c.type||f("define","$di -> type"),"ctor"===c.instance?delete c.lifestyle:(c.instance="item",c.lifestyle&&"singleton"!==c.lifestyle&&(c.lifestyle="transient"))}t[r]=c}return t},p={define:function(r,i){var c,a,u,l=arguments.length;switch(l){case 1:c=o[r],s(c,r);break;case 2:switch(typeof i){case t:a=i().$extend,a!==e?(u=o[a],s(u,a),c=$(r,u,i(u.$base))):c=$(r,e,i(e));break;case n:if(null===i)return delete o[r],e;a=i.$extend,a!==e&&(u=o[a],s(u,a)),c=$(r,u,i);break;default:f("define","definition")}o[r]=c,o[r].$di=d(r,c.$di);break;default:f("define")}return c.$ctor},mixin:function(e,n){null!==n?(typeof n!==t&&f("mixin","definition"),c[e]=n):delete c[e]},resolve:function(e,t){var n,r=0,i=o[e],c=arguments.length,s=function(e,t,n){var r;return e?(e=u(e,t),r=new n.$ctor(e)):r=new n.$ctor(t),r},l=function(t,i,o,c){var $,d,p,y=t.$current,m=t.$ctor,v=t;if(r+=1,r>a)throw new Error("Loop of recursion","moa");switch(y||(y=t),p=o[y.type],m||(m=p.$di.$ctor),v===y&&(v=p.$di),y.instance){case"item":switch(m&&($=i(m,l,o)),d=i(v,l,o),y.lifestyle){case"transient":n=s(c,$,p);break;case"singleton":y.item||(y.item=s(c,$,p)),n=y.item;break;default:f("resolve",e+"::$di::$current::lifestyle")}break;case"ctor":n=p.$ctor;break;default:f("resolve",e+"::$di::$current::instance")}return d&&(n=u(n,d)),n},$=function(e,t,n){var r,i,o,c={};for(r in e)"$current"!==r&&"$ctor"!==r&&(i=e[r],"object"==typeof i?(o=n[i.type],c[r]=o?t(i,$,n):e[r]):c[r]=e[r]);return c};return 1!==c&&2!==c&&f("resolve"),n=i?l(i.$di,$,o,t):e},clear:function(){var e=function(e){var t;for(t in e)delete e[t]};e(o),e(c)},getRegistry:function(){var e=function(e){var t,n=[];for(t in e)n.push(t);return n};return{type:e(o),mixin:e(c)}},getTypeInfo:function(e){var t,n=o[e];return s(n,e),t=u({},n),delete t.$ctor,delete t.$base,delete t.$di,t.$di=JSON.parse(JSON.stringify(n.$di)),t}};typeof define!==r?define("Moa",[],function(){return p}):typeof window!==r?window.Moa=p:module.exports=p}();
//# sourceMappingURL=moa.min.js.map